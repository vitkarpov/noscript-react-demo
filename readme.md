```
$ npm install && npm run build
```

## Как сделана интеграция ns и react сейчас

Есть классы вьюшек `ns.ViewReact, ns.BoxReact, ...`, которые встраиваются в текущее поведение ns-апдейта. Начиная с какого-то момента вьюшки рисуются уже полностью в виртуальном доме.

Чем не нравится это решение? Основная проблема в том, что появляется два апдейта: ноускриптовый и реактовый:

- хочется дернуть `setState` у вьюшки, но нельзя — она валидная и с точки зрения ns не нужно ничего перерисовывать (что выносит мозг с реактом)
- сложный алгоритм определения `selfValid` у вьюшки: приходится постоянно спускать вниз по дереву и смотреть есть ли невалидные детки, если так, то помечать родительскую вьюшку как невалидную, потому что если дальше нее апдейте не пойдет, то и детки не перерисуются

Создается впечатление, что ns апдейт вовсе лишний. Он нужен:

- чтобы запросить все синхронные модельки
- чтобы создавать правильные экземпляры вьюшек и рисовать их в определенных местах (в том числе и динамически, с помощью боксов)

Со второй задачей отлично справляется реакт.

## Как хочется сделать интеграцию ns и react

Разделить ns и реакт более явно:

- ns занимается роутингом и данными (умеет запрашивать, кешировать, ns.Model.get)
- ns.page.go по ссылкам (но без ns-апдейта!)
- экшены

- реакт занимается отрисовкой **всего дерева самостоятельно**

## Что необходимо для такой интеграции

- придумать связь между вьюшками и моделями: по аналогии с редаксом это может быть некий HOC (назовем его DataProvider), который принимает айдишники и параметры моделей, достает нужны экземпляры и дергает своих деток, передавая им некий стейт
- придумать механизм запроса моделей по реактивному лейауту: DataProvider, понимая, что моделька невалидная, ставит ее в общую очередь запросов (единая, чтобы сохранить балковость запросов), по-прежнему рисует своих деток, но в стейте они, например, получают соответствующий флажок о состоянии модели, чтобы детки сами решили как им рисоваться (или не рисоваться)

[Пруф оф консепт](https://vitkarpov.github.io/noscript-react-demo/)

Все, что необходимо, это:

```js
ns.page.startUpdate = function(route) {
    ReactDOM.render(
        <App ...route />, document.getElementById('app')
    );
}
```

главная вьюшка и выполняет роль лейаута, получаю в пропсы страницу и параметры.
